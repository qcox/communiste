local compile = loadstring(game:HttpGet("https://raw.githubusercontent.com/qcox/communiste/main/lua%20vm/FiOne"))()
local createExecutable = loadstring(game:HttpGet("https://raw.githubusercontent.com/qcox/communiste/main/lua%20vm/Yueliang"))()
getfenv().script = nil

return function(source, env)
	local executable
	local env = env or getfenv(2)
	local name = (env.script and env.script:GetFullName())
	local ran, failureReason = pcall(function()
		local compiledBytecode = compile(source, name)
		executable = createExecutable(compiledBytecode, env)
	end)
	
	if ran then
		return setfenv(executable, env)
	end
	return nil, failureReason
end
